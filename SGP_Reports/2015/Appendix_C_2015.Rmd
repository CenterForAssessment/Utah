---
title: "Appendix C to the 2015 Utah Growth Model Report"
subtitle: "Investigation of Potential Ceiling and Floor Effects."
author:
  - name: Adam R. VanIwaarden
  - name: Damian W. Betebenner
  - name: <em>National Center for the Improvement<br></br> of Educational Assessment (NCIEA)</em>
date: November 2015
---

<!--SGPreport-->

```{r, echo=FALSE, include=FALSE}
  require(SGP)
  require(Gmisc)
	require(ggplot2)
	require(data.table)

  ## set a universal Cache path
  knitr::opts_chunk$set(cache.path = "_cache/Appendix_C_2015", fig.path="../img/Appendices/Appendix_C_2015/")

  ##  Set Table, Figure and Equation Counters
  options(table_counter=FALSE)
  options(table_number=0)
  options(table_counter_str = "<strong>Table C.%s:</strong> ")
  options("fig_caption_no"=0)
  options(fig_caption_no_sprintf = "**Fig. C.%s:**   %s")
  options("fig_caption_no_roman"=FALSE)
	options("equation_counter" = 0)
	
	subject_order<-c("ELA", "MATHEMATICS", "SCIENCE", 
									 "EARTH_SCIENCE", "BIOLOGY", "CHEMISTRY", "PHYSICS")
	GL_subjects <- c("ELA", "MATHEMATICS", "SCIENCE")
	EOCT_subjects<-c("EARTH_SCIENCE", "BIOLOGY", "CHEMISTRY", "PHYSICS", "SEC_MATH_I", "SEC_MATH_II", "SEC_MATH_III")

	prior.year <- "2014"
	current.year <- "2015"

	###  Set up long data
	long.data <- copy(Utah_SGP@Data[, c("ID", "VALID_CASE", "CONTENT_AREA",  "GRADE", "YEAR", "SCALE_SCORE", "SGP", "SCALE_SCORE_PRIOR", "SCALE_SCORE_PRIOR_STANDARDIZED", "SGP_NORM_GROUP"), with=FALSE][VALID_CASE=="VALID_CASE" & YEAR %in% c(prior.year, current.year)])
	# table(long.data[YEAR==current.year][, GRADE, CONTENT_AREA])
	##  Get max score lookup

	##  Top/Bottom 0.X% Can't do this with long.data.  Could try to get grade/subject specific pct value.  
	##  Might get close with EOGT, but not with EOCT (incomplete norm groups post preference based merge in combineSGP)
	#	pct <- .995
	# pct <- 50/dim(tmp.data.final)[1] # Take Top/Bottom 50 kids to find LOSS/HOSS

	setkeyv(long.data, c("CONTENT_AREA", "YEAR",  "GRADE", "SCALE_SCORE"))

	loss.hoss <- long.data[YEAR == current.year & !is.na(SGP)][, list(
		# LOSS_PCT = quantile(as.numeric(SCALE_SCORE), probs = 1-pct, na.rm = T), 
		LOSS_50 = SCALE_SCORE[which.min(SCALE_SCORE)+49], #  Bottom 50 Scores
# 		LOSS_2 = SCALE_SCORE[which.min(SCALE_SCORE)+1], #  Bottom 2 Scores
		LOSS_1 = min(SCALE_SCORE),   #  LOSS Only
		# HOSS_PCT = quantile(as.numeric(SCALE_SCORE), probs = pct, na.rm = T), 
		HOSS_50 = SCALE_SCORE[which.max(SCALE_SCORE)-49], #  TOP 50 Scores
		# HOSS_2 = SCALE_SCORE[which.max(SCALE_SCORE)-1], #  TOP 2 Scores
		HOSS_1 = max(SCALE_SCORE)   #  HOSS Only
		), keyby=list(CONTENT_AREA, YEAR, GRADE)]

	setkeyv(long.data, c("CONTENT_AREA", "YEAR", "GRADE"))
	long.data <- merge(long.data, loss.hoss, all.x = TRUE)
	long.data[, Grade := factor(as.numeric(GRADE))]

	# tmp_prior_grade <- sapply(as.character(long.data$SGP_NORM_GROUP), function(f) tail(strsplit(tail(strsplit(f, ";")[[1]],2)[1], "_")[[1]], 1))

	##  Subset out all students with max score and their historical long data

	max.data <- data.table(long.data[SCALE_SCORE >= HOSS_50 & !is.na(SGP),], key=c("ID", "CONTENT_AREA", "GRADE"))
	max.data[, CA := gsub("Sec ", "Secondary ", sapply(CONTENT_AREA, capwords))]
	min.data <- data.table(long.data[SCALE_SCORE <= LOSS_50 & !is.na(SGP),], key=c("ID", "CONTENT_AREA", "GRADE"))
	min.data[, CA := gsub("Sec ", "Secondary ", sapply(CONTENT_AREA, capwords))]

	###
	###  Utility functions for ggplot (necessary because use of ggplot(...) withing knitr is odd - can't find defined variables in envir/scope, just like data.table)
	###
	
	condDistPlot <- function(ca, g) {
		tmp.data <- subset(long.data, YEAR==current.year & CONTENT_AREA==ca & GRADE==g & !is.na(SCALE_SCORE_PRIOR), select=c(ID, SCALE_SCORE, SCALE_SCORE_PRIOR))

		if (g == "EOCT") {
			x.lab <- paste(current.year, gsub("Sec ", "Secondary ", capwords(ca)))
			y.lab <- "Prior Standardized Scores\n"
		}	else {
			x.lab <- paste(current.year, "Grade", g, capwords(ca))
			y.lab <- paste(prior.year, "Grade", g-1, capwords(ca))
		}

		ggplot(tmp.data, aes(x=SCALE_SCORE, y=SCALE_SCORE_PRIOR)) + geom_point(alpha=0.35) + theme_bw() + 
			geom_smooth(aes(x=SCALE_SCORE), colour='magenta', method="gam", formula =y ~ s(x, bs = "cs")) + 
			geom_rug(sides="tb", size=0.05, col=rgb(0.8,0,0,alpha=0.05)) + geom_rug(sides="rl", size=0.05, col=rgb(0,0,0.8,alpha=0.05)) +
			stat_density2d(data=tmp.data, geom="density2d",  aes(alpha = ..level..), colour='green', contour = TRUE) + #, size=1
			labs(y = y.lab, x = x.lab) + theme(axis.title=element_text(size=10, face="bold"), legend.position="none")
	}

	boxPlot <- function(tmp.data, y, LOSS=FALSE, facet=TRUE) {
		give.n <- function(x) { return(c(y = y, label = length(x))) }
		if (facet) {
			if (LOSS) {
				p <- ggplot(data=tmp.data, aes(x=CA, y=SGP, fill=Grade, ymax=(min(SGP) +10))) + 
						 geom_boxplot() + facet_grid(.~CA, scales="free") + labs(x="", y="Lowest Scoring Students' Growth Percentiles") 
			} else {
				p <- ggplot(data=tmp.data, aes(x=CA, y=SGP, fill=Grade, ymax=(min(SGP) -10))) + 
						 geom_boxplot() + facet_grid(.~CA, scales="free") + labs(x="", y="Highest Scoring Students' Growth Percentiles") 
			}
			p + stat_summary(fun.data = give.n, geom = "text", position=position_dodge(height = 0, width = 0.75), size=4, colour="red") +
					coord_flip() + theme(axis.title=element_text(size=12,face="bold"), axis.text.y = element_blank()) # +
		} else {
			if (LOSS) {
				p <- ggplot(data=tmp.data, aes(x=CA, y=SGP, fill=CA, ymax=(min(SGP) +7))) + 
						 geom_boxplot() + labs(x="Content Area", y="Lowest Scoring Students' Growth Percentiles")
			} else {
				p <- ggplot(data=tmp.data, aes(x=CA, y=SGP, fill=CA, ymax=(min(SGP) -7))) + 
						 geom_boxplot() + labs(x="Content Area", y="Highest Scoring Students' Growth Percentiles")
			}
			p + stat_summary(fun.data = give.n, geom = "text", position=position_dodge(height = 0, width = 0.75), size=4, colour="red") +
					coord_flip() + theme(axis.title=element_text(size=12,face="bold"), legend.position="none")
		}
	}
```


# Introduction
In the 2013-2014 academic year, Utah transitioned from its previous Utah Criterion Referenced Tests (CRT) to the [Student Assessment of Growth and Excellence (SAGE)](http://www.schools.utah.gov/assessment/SAGE.aspx). The transition included numerous changes to the assessment system including the incorporation of new performance standards and moving to a vertical scale.  As other states have gone through similar assessment transitions in 2014-2015, many have observed ceiling and floor effects in the new assessments (i.e. a relatively large proportion of students scoring at/near the scale extremes).  This has occurred despite the supposed improved assessments with qualities should prevent these effects (e.g. adaptive tests).  Regardless of the cause of assessment ceilings/floors, they can impact Student Growth Percentile (SGP) calculation in such a way that the SGP estimates are questionable or nonsensical.

Although very similar in nature, ceiling effects are somewhat more problematic because consistently highest achieving students receive lower than expected growth percentiles and therefore the students are negatively impacted.  Conversely, consistently lowest achieving students have higher estimated SGPs than would be expected.  Although this could be interpreted as a positive impact on these students by giving them higher SGPs, it can also conceals unacceptably low growth.  

Essentially these problems are caused by the way in which a "percentile" is defined to begin with, and the inability of the assessments (and therefore the SGP model) to make granular distinctions between kids who score at the extremes of the test year after year.  As an example, if a group of students were tested with a relatively easy test and 20% of the students had a perfect score, these students would be defined as being in the 80<sup>th</sup> percentile because they scored higher than 80% of their peers.  This is somewhat misleading however, because they also scored *at or above* 100% of their peers and so could be also defined as achieving at the 99.99<sup>th</sup> percentile.  To extend this heuristic from achievement to growth, if 50% of those top scorers also scored perfectly on the next test, we might estimate that they had 50<sup>th</sup> percentile growth.  Although there is nothing *technically* incorrect about this estimate because their growth is fairly typical for their specific norm group, it is an inadequate or unsatisfactory assessment of their growth because they have consistently attained at the highest level.

Given these impacts and the difficulty in detecting them given traditional SGP diagnostic tools, the Center for Assessment has added "Ceiling/Test Effects" indicators to the SGP model goodness of fit plots, as well as providing all clients even more rigorous diagnostics through this appendix to the annual technical report.  This report includes:

1. Plots of the scale score distribution densities for the current and prior years, which may provide an indication of whether a ceiling or floor is present in either the current or historical data.
2. Box plots showing the range and distribution of SGPs for *only* the highest and lowest achieving students in the current year.


<!-- HTML_Start -->
<!-- <div class='breakboth' ></div> -->

<!-- LaTeX_Start 
\pagebreak
LaTeX_End -->


# Prior and Current Year Score Distributions
The marginal and conditional distributions of scale scores can serve as a preliminary indicator of potential ceiling or floor effects in the calculation of student growth percentiles.  Some minor problems could present themselves if these characteristics are present in either prior or current year scores, and are particularly likely when present in both.  The plots below depict distributions for the current year and the most recent prior year used in the SGP calculations.  The marginal (individual) distributions for each year is shown in the first subsections below, followed by the conditional (joint) distributions.  End-of-grade test (EOGT) content area plots are disaggregated by grade, while end-of-course test (EOCT) subject plots are not.

## Marginal Distributions
Generally there is little evidence of potential issues with the Utah SAGE tests in either the prior (2014, shown in blue) and current (2015, shown in red) scale scores for the end of grade tests (EOGT).  There are some indications of minor floor effects in the Mathematics assessments, particularly in the 2014 transition year.  The end of course test (EOCT) distributions are not concerning for the content areas within the sciences domain, but there is evidence of a floor effect in the Secondary Mathematics assessments.  These effects (which appear as spikes at the extreme left side of the distributions) are more prominent in the prior scores, but are notable in the current year as well.  This conforms to what was observed first in the SGP model goodness of fit plots (see 2015 technical report Appendix A), and conditional density and SGP distribution box plots in subsequent sections confirm this floor effect.

```{r, echo=FALSE, include=FALSE, margDist_Prior_ELA, cache=TRUE, fig.height=3.75, fig.width=7}
#  Loop around subjects to produce plots:  - NOPE!  For some reason for loops don't work in knitr ...  No plots produced in code chunk
	ggplot(data=data.table(long.data[CONTENT_AREA=="ELA" & YEAR == prior.year & GRADE %in% 3:10,][, list(ID, SCALE_SCORE, Grade)], key=c("ID", "SCALE_SCORE")), 
			 aes(x= SCALE_SCORE, y = ..count..)) + geom_density(alpha=0.5, fill=rgb(0,0,0.8)) + facet_wrap(~ Grade, scales="free_x", ncol=4) + 
		labs(x='\nPrior Year Scale Scores') + theme(axis.title=element_text(size=12,face="bold"), legend.position = "none") 
```
```{r, echo=FALSE, include=FALSE, margDist_Crnt_ELA, cache=TRUE, fig.height=3.75, fig.width=7}
	ggplot(data=data.table(long.data[CONTENT_AREA=="ELA" & YEAR == current.year & GRADE %in% 4:11,][, list(ID, SCALE_SCORE, Grade)], key=c("ID", "SCALE_SCORE")), 
			 aes(x= SCALE_SCORE, y = ..count..)) + geom_density(alpha=0.5, fill=rgb(0.8,0,0)) + facet_wrap(~ Grade, scales="free_x", ncol=4) + 
		labs(x='\nCurrent Year Scale Scores') + theme(axis.title=element_text(size=12,face="bold"), legend.position = "none") 
```
```{r, echo=FALSE, include=FALSE, margDist_Prior, cache=TRUE, fig.height=3.75, fig.width=7}
	ggplot(data=data.table(long.data[CONTENT_AREA=="MATHEMATICS" & YEAR == prior.year,][, list(ID, SCALE_SCORE, Grade)], key=c("ID", "SCALE_SCORE")), 
			 aes(x= SCALE_SCORE, y = ..count..)) + geom_density(alpha=0.5, fill=rgb(0,0,0.8)) + facet_wrap(~ Grade, scales="free_x", ncol=3) + 
		labs(x='\nPrior Year Scale Scores') + theme(axis.title=element_text(size=12,face="bold"), legend.position = "none") 

	ggplot(data=data.table(long.data[CONTENT_AREA=="SCIENCE" & YEAR == prior.year,][, list(ID, SCALE_SCORE, Grade)], key=c("ID", "SCALE_SCORE")), 
			 aes(x= SCALE_SCORE, y = ..count..)) + geom_density(alpha=0.5, fill=rgb(0,0,0.8)) + facet_wrap(~ Grade, scales="free_x", ncol=3) + 
		labs(x='\nPrior Year Scale Scores') + theme(axis.title=element_text(size=12,face="bold"), legend.position = "none") 
```
```{r, echo=FALSE, include=FALSE, margDist_Crnt, cache=TRUE, fig.height=3.75, fig.width=7}
	ggplot(data=data.table(long.data[CONTENT_AREA=="MATHEMATICS" & YEAR == current.year,][, list(ID, SCALE_SCORE, Grade)], key=c("ID", "SCALE_SCORE")), 
			 aes(x= SCALE_SCORE, y = ..count..)) + geom_density(alpha=0.5, fill=rgb(0.8,0,0)) + facet_wrap(~ Grade, scales="free_x", ncol=3) + 
		labs(x='\nCurrent Year Scale Scores') + theme(axis.title=element_text(size=12,face="bold"), legend.position = "none") 

	ggplot(data=data.table(long.data[CONTENT_AREA=="SCIENCE" & YEAR == current.year,][, list(ID, SCALE_SCORE, Grade)], key=c("ID", "SCALE_SCORE")), 
			 aes(x= SCALE_SCORE, y = ..count..)) + geom_density(alpha=0.5, fill=rgb(0.8,0,0)) + facet_wrap(~ Grade, scales="free_x", ncol=3) + 
		labs(x='\nCurrent Year Scale Scores') + theme(axis.title=element_text(size=12,face="bold"), legend.position = "none") 
```

### ELA

<!-- HTML_Start -->
##### `r figCapNo("Marginal distributions of prior scale scores:  EOGT ELA.")`
![](../img/Appendices/Appendix_C_2015/margDist_Prior_ELA-1.png)

##### `r figCapNo("Marginal distributions of current scale scores:  EOGT ELA.")`
![](../img/Appendices/Appendix_C_2015/margDist_Crnt_ELA-1.png)

<!-- LaTeX_Start 
\begin{figure}[H]
\caption*{\label{fig:Bidensity} {\bf{Fig. C.1:}} Marginal distributions of prior scale scores:  EOGT ELA.}
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/margDist_Prior_ELA-1.png}
  \end{subfigure}
\end{figure}

\begin{figure}[H]
\caption*{\label{fig:Bidensity} {\bf{Fig. C.2:}} Marginal distributions of current scale scores:  EOGT ELA.}
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/margDist_Crnt_ELA-1.png}
  \end{subfigure}
\end{figure}

\pagebreak
LaTeX_End -->


###  Mathematics

<!-- HTML_Start -->
##### `r figCapNo("Marginal distributions of prior scale scores:  EOGT Mathematics.")`
![](../img/Appendices/Appendix_C_2015/margDist_Prior-1.png)

##### `r figCapNo("Marginal distributions of current scale scores:  EOGT Mathematics.")`
![](../img/Appendices/Appendix_C_2015/margDist_Crnt-1.png)

<!-- LaTeX_Start 
\begin{figure}[H]
\caption*{\label{fig:Bidensity} {\bf{Fig. C.3:}} Marginal distributions of prior scale scores:  EOGT Mathematics.}
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/margDist_Prior-1.png}
  \end{subfigure}
\end{figure}

\begin{figure}[H]
\caption*{\label{fig:Bidensity} {\bf{Fig. C.4:}} Marginal distributions of current scale scores:  EOGT Mathematics.}
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/margDist_Crnt-1.png}
  \end{subfigure}
\end{figure}

\pagebreak
LaTeX_End -->

###  Science

<!-- HTML_Start -->
##### `r figCapNo("Marginal distributions of prior scale scores:  EOGT Science.")`
![](../img/Appendices/Appendix_C_2015/margDist_Prior-2.png)

##### `r figCapNo("Marginal distributions of current scale scores:  EOGT Science.")`
![](../img/Appendices/Appendix_C_2015/margDist_Crnt-2.png)

<!-- LaTeX_Start 
\begin{figure}[H]
\caption*{\label{fig:Bidensity} {\bf{Fig. C.5:}} Marginal distributions of prior scale scores:  EOGT Science.}
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/margDist_Prior-2.png}
  \end{subfigure}
\end{figure}

\begin{figure}[H]
\caption*{\label{fig:Bidensity} {\bf{Fig. C.6:}} Marginal distributions of current scale scores:  EOGT Science.}
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/margDist_Crnt-2.png}
  \end{subfigure}
\end{figure}

\pagebreak
LaTeX_End -->


###  EOCT Content Areas

```{r, echo=FALSE, include=FALSE, margDist_EOCT, cache=TRUE, fig.height=3.75, fig.width=7}
	x <- data.table(long.data[CONTENT_AREA %in% EOCT_subjects,][, list(ID, SCALE_SCORE, CONTENT_AREA, YEAR)], key=c("ID", "SCALE_SCORE"))
	x[, CA := factor(CONTENT_AREA)]
	levels(x$CA) <- gsub("Sec ", "Secondary ", sapply(levels(x$CA), capwords))
	
	ggplot(x[YEAR == prior.year], aes(x=SCALE_SCORE, y = ..count..)) + geom_density(alpha=0.5, fill=rgb(0,0,0.8)) + 
		facet_wrap(~CA, scales="free_x", ncol=4) +labs(x='\nPrior Year Scale Scores') +
		theme(axis.title=element_text(size=12,face="bold"), legend.position = "none") # plot.title=element_text(size=12, face="bold"), 

	ggplot(x[YEAR==current.year], aes(x=SCALE_SCORE, y = ..count..)) + geom_density(alpha=0.5, fill=rgb(0.8,0,0)) + 
		facet_wrap(~CA, scales="free_x", ncol=4) +labs(x='\nCurrent Year Scale Scores') +
		theme(axis.title=element_text(size=12,face="bold"), legend.position = "none") # plot.title=element_text(size=12, face="bold"), 
```

<!-- HTML_Start -->
##### `r figCapNo("Marginal distributions of prior scale scores:  EOCT Content Areas.")`
![](../img/Appendices/Appendix_C_2015/margDist_EOCT-1.png)

##### `r figCapNo("Marginal distributions of current scale scores:  EOCT Content Areas.")`
![](../img/Appendices/Appendix_C_2015/margDist_EOCT-2.png)

<!-- LaTeX_Start 
\begin{figure}[H]
\caption*{\label{fig:Bidensity} {\bf{Fig. C.5:}} Marginal distributions of prior scale scores:  EOCT Content Areas.}
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/margDist_EOCT-1.png}
  \end{subfigure}
\end{figure}

\begin{figure}[H]
\caption*{\label{fig:Bidensity} {\bf{Fig. C.6:}} Marginal distributions of current scale scores:  EOCT Content Areas.}
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/margDist_EOCT-2.png}
  \end{subfigure}
\end{figure}

\pagebreak
LaTeX_End -->


## Conditional Distributions
The marginal (individual) density plots provide a limited amount of information, particularly for the potential for ceiling/floor effects in the calculation of ***growth***.  In order to provide a more nuanced view of the relationship between the prior and current scale scores, the following plots depict the conditional (joint) distributions for each content area and grade level.  These plots start with a basic scatter plot of each student's scores, and on top of this is layered 1) **green contour lines** to provide a sense of joint density, 2) a **magenta non-linear line** identifying the bivariate relationship, and 3) **rug plots** that describe the marginal distributions (as above, the prior scores are blue and current scores are red).  

For the 2014 and 2015 Utah data, we again see very few issues in all content area and grade combinations, with the exception of the EOCT Secondary Mathematics courses.  Whereas floor effects appear in single years in other places, these plots (Figure C.12) show consistent floor effects in both years and the prevalence of students scoring the lowest observable score for (at least) two years in a row.

```{r, echo=FALSE, include=FALSE, condDist_EOGT, cache=TRUE, fig.height=3, fig.width=3}
#  Loop around subjects to produce plots:
	condDistPlot(ca="ELA", g=4)
	condDistPlot(ca="ELA", g=5)
	condDistPlot(ca="ELA", g=6)
	condDistPlot(ca="ELA", g=7)
	condDistPlot(ca="ELA", g=8)
	condDistPlot(ca="ELA", g=9)
	condDistPlot(ca="ELA", g=10)
	condDistPlot(ca="ELA", g=11)

	condDistPlot(ca="MATHEMATICS", g=4)
	condDistPlot(ca="MATHEMATICS", g=5)
	condDistPlot(ca="MATHEMATICS", g=6)
	condDistPlot(ca="MATHEMATICS", g=7)
	condDistPlot(ca="MATHEMATICS", g=8)
	
	condDistPlot(ca="SCIENCE", g=5)
	condDistPlot(ca="SCIENCE", g=6)
	condDistPlot(ca="SCIENCE", g=7)
	condDistPlot(ca="SCIENCE", g=8)

# for (ca in GL_subjects) {
# 	for (g in 4:11) {
# 		x <- data.table(long.data[YEAR==current.year & CONTENT_AREA==ca & GRADE==g,][, list(ID, SCALE_SCORE, SCALE_SCORE_PRIOR)][!is.na(SCALE_SCORE_PRIOR)], key=c("ID", "SCALE_SCORE"))
# 		if (dim(x)[1] > 0) {
# 			condDistPlot(data=x, ca, g)
# 		}
# 	}
# }
```

###  Mathematics

<!-- HTML_Start -->
##### `r figCapNo("Conditional distribution(s) of current and prior scale scores:  EOGT Mathematics.")`
![](../img/Appendices/Appendix_C_2015/condDist_EOGT-9.png) ![](../img/Appendices/Appendix_C_2015/condDist_EOGT-10.png) 


##### `r figCapNo("Conditional distribution(s) of current and prior scale scores:  EOGT Mathematics <em>Continued</em>.")`
![](../img/Appendices/Appendix_C_2015/condDist_EOGT-11.png) ![](../img/Appendices/Appendix_C_2015/condDist_EOGT-12.png) ![](../img/Appendices/Appendix_C_2015/condDist_EOGT-13.png)

<!-- LaTeX_Start 
\begin{figure}[H]
\caption*{\label{fig:condDistMath} {\bf{Fig. C.7:}} Conditional distribution(s) of current and prior scale scores:  EOGT Mathematics.}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOGT-9.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOGT-10.png}
  \end{subfigure}
\end{figure}

\pagebreak

\begin{figure}[H]
\caption*{\label{fig:condDistMath2} {\bf{Fig. C.8:}} Conditional distribution(s) of current and prior scale scores:  EOGT Mathematics \textit{Continued}.}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOGT-11.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOGT-12.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOGT-13.png}
  \end{subfigure}
\end{figure}

\pagebreak
LaTeX_End -->

###  ELA

<!-- HTML_Start -->
##### `r figCapNo("Conditional distribution(s) of current and prior scale scores:  EOGT ELA.")`
![](../img/Appendices/Appendix_C_2015/condDist_EOGT-1.png) ![](../img/Appendices/Appendix_C_2015/condDist_EOGT-2.png) ![](../img/Appendices/Appendix_C_2015/condDist_EOGT-3.png) ![](../img/Appendices/Appendix_C_2015/condDist_EOGT-4.png)


##### `r figCapNo("Conditional distribution(s) of current and prior scale scores:  EOGT ELA <em>Continued</em>.")`
![](../img/Appendices/Appendix_C_2015/condDist_EOGT-5.png) ![](../img/Appendices/Appendix_C_2015/condDist_EOGT-6.png) ![](../img/Appendices/Appendix_C_2015/condDist_EOGT-7.png) ![](../img/Appendices/Appendix_C_2015/condDist_EOGT-8.png)


<!-- LaTeX_Start 
\begin{figure}[H]
\caption*{\label{fig:condDistELA} {\bf{Fig. C.9:}} Conditional distribution(s) of current and prior scale scores:  EOGT ELA.}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOGT-1.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOGT-2.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOGT-3.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOGT-4.png}
  \end{subfigure}
\end{figure}

\pagebreak

\begin{figure}[H]
\caption*{\label{fig:condDistELA2} {\bf{Fig. C.10:}} Conditional distribution(s) of current and prior scale scores:  EOGT ELA \textit{Continued}.}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOGT-5.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOGT-6.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOGT-7.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOGT-8.png}
  \end{subfigure}
\end{figure}

\pagebreak
LaTeX_End -->



###  Science

<!-- HTML_Start -->
##### `r figCapNo("Conditional distribution(s) of current and prior scale scores:  EOGT Science.")`
![](../img/Appendices/Appendix_C_2015/condDist_EOGT-14.png) ![](../img/Appendices/Appendix_C_2015/condDist_EOGT-15.png) ![](../img/Appendices/Appendix_C_2015/condDist_EOGT-16.png) ![](../img/Appendices/Appendix_C_2015/condDist_EOGT-17.png)

<!-- LaTeX_Start 
\begin{figure}[H]
\caption*{\label{fig:condDistELA} {\bf{Fig. C.11:}} Conditional distribution(s) of current and prior scale scores:  EOGT Science.}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOGT-14.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOGT-15.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOGT-16.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOGT-17.png}
  \end{subfigure}
\end{figure}

\pagebreak
LaTeX_End -->

###  EOCT Content Areas
The Secondary Mathematics courses for both the 2014 and 2015 Utah EOCT data^[Note that all of these plots use the standardized prior year scale scores.  This is due to the use of multiple content area progressions in the EOCT analyses, so the standardization puts the prior scores on a more comparable scale.] have floor effects, including students scoring the lowest observable score for both years (visible as the dark shaded point in the extreme bottom left corner of the plots in Figure C.12).  This suggests that staying at the floor from year to year is not uncommon, which may lead to inflated growth estimates for these chronically low achieving students.


```{r, echo=FALSE, include=FALSE, condDist_EOCT_M, cache=TRUE, fig.height=2.75, fig.width=3}
		condDistPlot(ca="SEC_MATH_I", g="EOCT")
		condDistPlot(ca="SEC_MATH_II", g="EOCT")
		condDistPlot(ca="SEC_MATH_III", g="EOCT")
```
```{r, echo=FALSE, include=FALSE, condDist_EOCT, cache=TRUE, fig.height=3, fig.width=3}
		condDistPlot(ca="EARTH_SCIENCE", g="EOCT")
		condDistPlot(ca="BIOLOGY", g="EOCT")
		condDistPlot(ca="CHEMISTRY", g="EOCT")
		condDistPlot(ca="PHYSICS", g="EOCT")

	#  Loop around subjects to produce plots:
	# for (ca in EOCT_subjects) {
# 		x <- data.table(long.data[YEAR==current.year & CONTENT_AREA==ca,][,list(
# 			ID, SCALE_SCORE, SCALE_SCORE_PRIOR_STANDARDIZED)][!is.na(SCALE_SCORE_PRIOR_STANDARDIZED)], key=c("ID","SCALE_SCORE"))
# 		ggplot(x,aes(x=SCALE_SCORE, y=SCALE_SCORE_PRIOR_STANDARDIZED)) + geom_point(alpha=0.35) + geom_smooth(aes(x=SCALE_SCORE), colour='magenta') +
# 				geom_rug(sides="tb", size=0.05, col=rgb(0.8,0,0,alpha=0.1)) + geom_rug(sides="rl", size=0.05, col=rgb(0,0,0.8,alpha=0.1)) +
# 				stat_density2d(data=x, geom="density2d",  aes(alpha = ..level..), colour='green', contour = TRUE, size=1) + theme_bw() +
# 				labs(y = "\nPrior Standardized Scale Scores\n", x =paste("\nCurrent Scale Score -", gsub("Sec ", "Secondary ", capwords(ca)))) +
# 				theme(axis.title=element_text(size=14,face="bold"), legend.position="none")
	# }
```

<!-- HTML_Start -->
##### `r figCapNo("Conditional distribution(s) of current and prior scale scores:  EOCT Mathematics.")`
![](../img/Appendices/Appendix_C_2015/condDist_EOCT_M-1.png) ![](../img/Appendices/Appendix_C_2015/condDist_EOCT_M-2.png) ![](../img/Appendices/Appendix_C_2015/condDist_EOCT_M-3.png)

<!-- LaTeX_Start 
\begin{figure}[H]
\caption*{\label{fig:condDistMath2} {\bf{Fig. C.12:}} Conditional distribution(s) of current and prior scale scores:  EOCT Mathematics.}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOCT-1.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOCT-2.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOCT-3.png}
  \end{subfigure}
\end{figure}

\pagebreak
LaTeX_End -->


Some more minor floor effects are apparent for the 2014 science related EOCT scores, and there may be some evidence of a ceiling effect in Physics.  Also of note is the dark shaded point in the extreme top right corner of the Earth Science plot.  Although this does not look particularly concerning here, this is evidence of a minor ceiling effect and is corroborated in the following section on the SGP distribution for the 2015 highest scoring students.

<!-- HTML_Start -->
##### `r figCapNo("Conditional distribution(s) of current and prior scale scores:  EOCT Sciences.")`
![](../img/Appendices/Appendix_C_2015/condDist_EOCT-1.png) ![](../img/Appendices/Appendix_C_2015/condDist_EOCT-2.png) ![](../img/Appendices/Appendix_C_2015/condDist_EOCT-3.png) ![](../img/Appendices/Appendix_C_2015/condDist_EOCT-4.png)

<!-- LaTeX_Start 
\begin{figure}[H]
\caption*{\label{fig:condDistMath2} {\bf{Fig. C.13:}} Conditional distribution(s) of current and prior scale scores:  EOCT Sciences.}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOCT-1.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOCT-2.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOCT-3.png}
  \end{subfigure}
  \begin{subfigure}[b]{0.5\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/condDist_EOCT-4.png}
  \end{subfigure}
\end{figure}

\pagebreak
LaTeX_End -->


# SGP Ranges for the Highest and Lowest Achieving Students

In order to isolate the impact of assessment ceilings/floors on student growth percentile (SGP) calculations, the following section provides box plots of the distribution of SGPs for the highest and lowest achieving students.  We are specifically interested in the SGPs for students scoring at the highest/lowest obtainable scale score (HOSS/LOSS - i.e. the actual ceiling/floor).  However, in order to assure that an adequate number of students are included in these plots, the first set of plots in each subsection uses, at a *minimum*, the highest/lowest 50 scores.  Note that this roughly corresponds to the number of students used in the SGP model goodness of fit plots, and this is why these plots are provided as a starting point for this part of the investigation.  If all 50 students have only a single scale score value (i.e. the HOSS/LOSS), then **all** students with this score are included.  Consequently, the number of students included in each box plot may be greater than 50 (the exact number is shown at the margins in red text).

The second set of box plots in the EOGT and EOCT subsections isolate ***only*** those students scoring the HOSS/LOSS.  These plots may then incorporate a varying number of students depending on the prevalence of a ceiling/floor in the current year.

The box plots provide several descriptive statistics.  The dark line within the box marks the *median* SGP, while the ends ("hinges") of the boxes correspond to the first and third quartiles (the 25<sup>th</sup> and 75<sup>th</sup> percentiles).  The upper whisker extends from the hinge to the highest value that is within 1.5 $\cdot$ IQR of the hinge, where IQR is the inter-quartile range, or distance between the first and third quartiles. The lower whisker extends from the hinge to the lowest value within 1.5 $\times$ IQR of the hinge. Data beyond the end of the whiskers are outliers and plotted as points.  Evidence of a *lack* of either a ceiling or floor effect would be to have all high achieving students with SGPs near 99 and all low achieving students with SGPs near 1.  That is, the desired visual evidence is a solid line at SGP = 99/1.

In the 2015 Utah EOGT SGP analyses, we see a slight ceiling effect in 8th grade math and some floor effects in grade level math as well (the 5<sup>th</sup> grade results are the most concerning).  EOCT Secondary Mathematics SGPs have a pronounced floor effect.

```{r, echo=FALSE, include=FALSE, cache=TRUE, HOSS_Box_EOGT, fig.height=4, fig.width=7}
	min.ceiling<-min(max.data[CONTENT_AREA %in% GL_subjects]$SGP) -5
	boxPlot(tmp.data=max.data[CONTENT_AREA %in% GL_subjects], min.ceiling)
	boxPlot(tmp.data=max.data[CONTENT_AREA %in% GL_subjects & SCALE_SCORE==HOSS_1], min.ceiling)
```

```{r, echo=FALSE, include=FALSE, cache=TRUE, LOSS_Box_EOGT, fig.height=4, fig.width=7}
	max.floor <- max(min.data[CONTENT_AREA %in% GL_subjects]$SGP)
	boxPlot(tmp.data=min.data[CONTENT_AREA %in% GL_subjects], max.floor +5, LOSS=TRUE)
	boxPlot(tmp.data=min.data[CONTENT_AREA %in% GL_subjects & SCALE_SCORE==LOSS_1], max.floor, LOSS=TRUE)
```

```{r, echo=FALSE, include=FALSE, cache=TRUE, HOSS_Box_EOCT, fig.height=4, fig.width=7}
	min.ceiling<-min(max.data[CONTENT_AREA %in% EOCT_subjects]$SGP)
	boxPlot(tmp.data=max.data[CONTENT_AREA %in% EOCT_subjects], min.ceiling -4, facet=FALSE)
	boxPlot(tmp.data=max.data[CONTENT_AREA %in% EOCT_subjects & SCALE_SCORE==HOSS_1], min.ceiling, facet=FALSE)
```

```{r, echo=FALSE, include=FALSE, cache=TRUE, LOSS_Box_EOCT, fig.height=4, fig.width=7}
	max.floor <- max(min.data[CONTENT_AREA %in% EOCT_subjects]$SGP)
	boxPlot(tmp.data=min.data[CONTENT_AREA %in% EOCT_subjects], max.floor +4, LOSS=TRUE, facet=FALSE)
	boxPlot(tmp.data=min.data[CONTENT_AREA %in% EOCT_subjects & SCALE_SCORE==LOSS_1], max.floor, LOSS=TRUE, facet=FALSE)
```

## EOGT Content Areas

<!-- HTML_Start -->
##### `r figCapNo("SGP distributions for highest and lowest 0.5% of scale scores by content area and grade level.")`
![](../img/Appendices/Appendix_C_2015/HOSS_Box_EOGT-1.png)


##### `r figCapNo("SGP distributions for the HOSS and LOSS scores by content area and grade level.")`
![](../img/Appendices/Appendix_C_2015/HOSS_Box_EOGT-2.png)

<!-- LaTeX_Start 
\begin{figure}[H]
\caption*{\label{fig:boxPlotEOGT} {\bf{Fig. C.14:}} SGP distributions for highest and lowest 0.5 percent of scale scores by content area and grade level.}
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/HOSS_Box_EOGT-1.png}
  \end{subfigure}
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/LOSS_Box_EOGT-1.png}
  \end{subfigure}
\end{figure}

\begin{figure}[H]
\caption*{\label{fig:boxPlotEOGT2} {\bf{Fig. C.15:}} SGP distributions for the HOSS and LOSS scores by content area and grade level.}
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/HOSS_Box_EOGT-2.png}
  \end{subfigure}
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/LOSS_Box_EOGT-2.png}
  \end{subfigure}
\end{figure}

\pagebreak
LaTeX_End -->


## EOCT Content Areas

<!-- HTML_Start -->
##### `r figCapNo("SGP distributions for highest and lowest 0.5% of scale scores by content area.")`
![](../img/Appendices/Appendix_C_2015/HOSS_Box_EOCT-1.png)


##### `r figCapNo("SGP distributions for the HOSS and LOSS scores by content area.")`
![](../img/Appendices/Appendix_C_2015/HOSS_Box_EOCT-2.png)

<!-- LaTeX_Start 
\begin{figure}[H]
\caption*{\label{fig:Bidensity} {\bf{Fig. C.16:}} SGP distributions for highest and lowest 0.5 percent of scale scores by content area.}
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/HOSS_Box_EOCT-1.png}
  \end{subfigure}
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/LOSS_Box_EOCT-1.png}
  \end{subfigure}
\end{figure}

\begin{figure}[H]
\caption*{\label{fig:Bidensity} {\bf{Fig. C.17:}} SGP distributions for the HOSS and LOSS scores by content area.}
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/HOSS_Box_EOCT-2.png}
  \end{subfigure}
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=\textwidth]{../img/Appendices/Appendix_C_2015/LOSS_Box_EOCT-2.png}
  \end{subfigure}
\end{figure}

\pagebreak
LaTeX_End -->

#  Discussion

Overall there is little evidence of major ceiling effects in the 2015 Utah SGP analyses.  There might be some room for concern about floor effects in the Secondary Mathematics analyses, although the consequences for the floor effects may be less problematic (i.e. underestimating how low these students growth actually is).

When ceiling or floor effects are encountered, there are several ways in which they can be "corrected" manually or analytically.  These include (but not limited to):

1. Convert all students scoring at the HOSS (LOSS) to 99 (1).
2. Run SGP analyses with more granular scores.  For example, many tests that use Item Response Theory (IRT) to analyse test results provide scaled scores that enforce an artificial ceiling (floor), but also have more granular achievement scores available (IRT $\theta$ estimates).
3. Leave the results without a correction.

